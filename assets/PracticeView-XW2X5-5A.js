import{u as p,a as f,j as e,P as n}from"./index-GI51ZVB_.js";import{u as N}from"./PracticePage-BIMhTMJ7.js";import{b as a}from"./react-vendor-JhYKpNTm.js";import{f as g}from"./timer-cOGH31-Q.js";import"./xlsx-vendor-zV2OkpLu.js";import"./FormatExample-BJIEgpnC.js";import"./LoadingStatus-BVATUZtH.js";function q(t,s,o){const[l,i]=a.useState(0),[u,r]=a.useState(60);a.useEffect(()=>{if(!t||!s){i(0);return}const d=setInterval(()=>{const x=Math.floor((Date.now()-s)/1e3);i(x)},1e3);return()=>clearInterval(d)},[t,s]),a.useEffect(()=>{if(!t||!o){r(60);return}const d=setInterval(()=>{const x=Math.floor((Date.now()-o)/1e3);r(60-x)},1e3);return()=>clearInterval(d)},[t,o]);const c=a.useCallback(()=>{i(0),r(60)},[]);return{totalSeconds:l,questionSeconds:u,reset:c}}function j({totalSeconds:t,questionSeconds:s}){const{currentQuestionIndex:o}=p(),{questions:l}=f(),i=l.length,u=o+1,r=a.useMemo(()=>{if(s<0)return"#ff6b6b"},[s]),c=a.useMemo(()=>s>=0?g(s):`+${g(Math.abs(s))}`,[s]);return e.jsx("div",{className:"stats",children:e.jsxs("div",{className:"stat-box",children:[e.jsxs("div",{className:"stat-item stat-box-total-time",children:[e.jsx("h3",{children:"Общее время"}),e.jsx("div",{className:"value",children:g(t)})]}),e.jsxs("div",{className:"stat-item stat-box-question",children:[e.jsx("h3",{children:"Вопрос"}),e.jsxs("div",{className:"value",children:[u,"/",i]})]}),e.jsxs("div",{className:"stat-item stat-box-question-time",children:[e.jsx("h3",{children:"Время на вопрос"}),e.jsx("div",{className:"value",style:r?{color:r}:void 0,children:c})]})]})})}j.propTypes={totalSeconds:n.number.isRequired,questionSeconds:n.number.isRequired};const w=a.memo(j);function v({question:t,showAnswer:s,showExplanation:o,onToggleAnswer:l,onToggleExplanation:i,onNext:u}){const{currentQuestionIndex:r,questionSeconds:c}=p(),{questions:d}=f(),x=d.length,h=r+1,b=a.useMemo(()=>s||o||c<=0,[s,o,c]);return e.jsxs("div",{id:"questionContainer",children:[e.jsxs("div",{className:"question-block",children:[e.jsx("div",{className:"question-category",children:t.category}),e.jsxs("div",{className:"question-number",children:["Вопрос ",h," из ",x]}),e.jsx("div",{className:"question-text",children:t.question}),e.jsxs("div",{className:"answer-section",children:[e.jsx("button",{className:"toggle-button",onClick:l,children:"Показать ответ"}),e.jsx("button",{className:"toggle-button",onClick:i,children:"Показать объяснение"}),s&&e.jsx("div",{className:"hidden-content show",children:e.jsx("div",{className:"answer-text",children:t.answer})}),o&&e.jsx("div",{className:"hidden-content show",children:e.jsx("div",{className:"explanation-text",children:t.explanation})})]})]}),e.jsx("div",{className:"controls",children:e.jsx("button",{className:"btn btn-success",onClick:u,disabled:!b,children:"Далее"})})]})}v.propTypes={question:n.shape({category:n.string.isRequired,question:n.string.isRequired,answer:n.string.isRequired,explanation:n.string}).isRequired,showAnswer:n.bool.isRequired,showExplanation:n.bool.isRequired,onToggleAnswer:n.func.isRequired,onToggleExplanation:n.func.isRequired,onNext:n.func.isRequired};const T=a.memo(v);function P(){const{isPracticeStarted:t,currentQuestion:s,showAnswer:o,showExplanation:l,practiceStartTime:i,questionStartTime:u,toggleAnswer:r,toggleExplanation:c,resetPractice:d}=p(),{totalSeconds:x,questionSeconds:h}=q(t,i,u),{next:b}=N();return!t||!s?null:e.jsxs(e.Fragment,{children:[e.jsx("button",{id:"restartBtn",onClick:d,style:{width:"100%",padding:"12px 20px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1em",fontWeight:"bold",boxShadow:"0 3px 10px rgba(255, 107, 107, 0.3)",transition:"all 0.3s",marginBottom:"15px"},onMouseEnter:m=>{m.currentTarget.style.background="#ff5252",m.currentTarget.style.transform="translateY(-2px)",m.currentTarget.style.boxShadow="0 5px 15px rgba(255, 107, 107, 0.4)"},onMouseLeave:m=>{m.currentTarget.style.background="#ff6b6b",m.currentTarget.style.transform="translateY(0)",m.currentTarget.style.boxShadow="0 3px 10px rgba(255, 107, 107, 0.3)"},children:"↻ Начать заново"}),e.jsx(w,{totalSeconds:x,questionSeconds:h}),e.jsx(T,{question:s,showAnswer:o,showExplanation:l,onToggleAnswer:r,onToggleExplanation:c,onNext:b})]})}export{P as default};
