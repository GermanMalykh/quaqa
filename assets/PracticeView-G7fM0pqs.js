import{a as g,u as f,j as e,P as n}from"./index-C_Qa9BS0.js";import{u as v}from"./usePracticeFlow-DikrZPAQ.js";import{b as r}from"./react-vendor-BonVoVve.js";import{f as h}from"./timer-cOGH31-Q.js";import"./xlsx-vendor-zV2OkpLu.js";function N(t,s,o){const[l,a]=r.useState(0),[u,i]=r.useState(60);r.useEffect(()=>{if(!t||!s){a(0);return}const d=setInterval(()=>{const x=Math.floor((Date.now()-s)/1e3);a(x)},1e3);return()=>clearInterval(d)},[t,s]),r.useEffect(()=>{if(!t||!o){i(60);return}const d=setInterval(()=>{const x=Math.floor((Date.now()-o)/1e3);i(60-x)},1e3);return()=>clearInterval(d)},[t,o]);const c=r.useCallback(()=>{a(0),i(60)},[]);return{totalSeconds:l,questionSeconds:u,reset:c}}function b({totalSeconds:t,questionSeconds:s}){const{currentQuestionIndex:o}=g(),{questions:l}=f(),a=l.length,u=o+1,i=r.useMemo(()=>s<=10&&s>=0?"linear-gradient(135deg, #ee5a6f 0%, #c44569 100%)":s<=30&&s>=0?"linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)":s<0?"linear-gradient(135deg, #c44569 0%, #8b2e4f 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",[s]),c=r.useMemo(()=>s>=0?h(s):`+${h(Math.abs(s))}`,[s]);return e.jsxs("div",{className:"stats",children:[e.jsxs("div",{className:"stat-box stat-box-total-time",children:[e.jsx("h3",{children:"Общее время"}),e.jsx("div",{className:"value",children:h(t)})]}),e.jsxs("div",{className:"stat-box stat-box-question",children:[e.jsx("h3",{children:"Вопрос"}),e.jsxs("div",{className:"value",children:[u,"/",a]})]}),e.jsxs("div",{className:"stat-box stat-box-question-time",style:{background:i},children:[e.jsx("h3",{children:"Время на вопрос"}),e.jsx("div",{className:"value",children:c})]})]})}b.propTypes={totalSeconds:n.number.isRequired,questionSeconds:n.number.isRequired};const q=r.memo(b);function j({question:t,showAnswer:s,showExplanation:o,onToggleAnswer:l,onToggleExplanation:a,onNext:u}){const{currentQuestionIndex:i,questionSeconds:c}=g(),{questions:d}=f(),x=d.length,m=i+1,p=r.useMemo(()=>s||o||c<=0,[s,o,c]);return e.jsxs("div",{id:"questionContainer",children:[e.jsxs("div",{className:"question-block",children:[e.jsx("div",{className:"question-category",children:t.category}),e.jsxs("div",{className:"question-number",children:["Вопрос ",m," из ",x]}),e.jsx("div",{className:"question-text",children:t.question}),e.jsxs("div",{className:"answer-section",children:[e.jsx("button",{className:"toggle-button",onClick:l,children:"Показать ответ"}),e.jsx("button",{className:"toggle-button",onClick:a,children:"Показать объяснение"}),s&&e.jsx("div",{className:"hidden-content show",children:e.jsx("div",{className:"answer-text",children:t.answer})}),o&&e.jsx("div",{className:"hidden-content show",children:e.jsx("div",{className:"explanation-text",children:t.explanation})})]})]}),e.jsx("div",{className:"controls",children:e.jsx("button",{className:"btn btn-success",onClick:u,disabled:!p,children:"Далее"})})]})}j.propTypes={question:n.shape({category:n.string.isRequired,question:n.string.isRequired,answer:n.string.isRequired,explanation:n.string}).isRequired,showAnswer:n.bool.isRequired,showExplanation:n.bool.isRequired,onToggleAnswer:n.func.isRequired,onToggleExplanation:n.func.isRequired,onNext:n.func.isRequired};const w=r.memo(j);function E(){const{isPracticeStarted:t,currentQuestion:s,showAnswer:o,showExplanation:l,practiceStartTime:a,questionStartTime:u,toggleAnswer:i,toggleExplanation:c}=g(),{totalSeconds:d,questionSeconds:x}=N(t,a,u),{next:m}=v();return!t||!s?null:e.jsxs(e.Fragment,{children:[e.jsx(q,{totalSeconds:d,questionSeconds:x}),e.jsx(w,{question:s,showAnswer:o,showExplanation:l,onToggleAnswer:i,onToggleExplanation:c,onNext:m})]})}export{E as default};
