import{u as j,a as p,j as e,P as n}from"./index-BeEHNiS-.js";import{u as b}from"./PracticePage-D8fEltOA.js";import{b as r}from"./react-vendor-BC8XAXHI.js";import{f as h}from"./timer-cOGH31-Q.js";import"./xlsx-vendor-zV2OkpLu.js";import"./FormatExample-CxXKYKYU.js";import"./LoadingStatus-CObaGmph.js";function N(t,s,o){const[l,a]=r.useState(0),[u,i]=r.useState(60);r.useEffect(()=>{if(!t||!s){a(0);return}const d=setInterval(()=>{const m=Math.floor((Date.now()-s)/1e3);a(m)},1e3);return()=>clearInterval(d)},[t,s]),r.useEffect(()=>{if(!t||!o){i(60);return}const d=setInterval(()=>{const m=Math.floor((Date.now()-o)/1e3);i(60-m)},1e3);return()=>clearInterval(d)},[t,o]);const c=r.useCallback(()=>{a(0),i(60)},[]);return{totalSeconds:l,questionSeconds:u,reset:c}}function v({totalSeconds:t,questionSeconds:s}){const{currentQuestionIndex:o}=j(),{questions:l}=p(),a=l.length,u=o+1,i=r.useMemo(()=>{if(s<0)return"#ff6b6b"},[s]),c=r.useMemo(()=>s>=0?h(s):`+${h(Math.abs(s))}`,[s]);return e.jsx("div",{className:"stats",children:e.jsxs("div",{className:"stat-box",children:[e.jsxs("div",{className:"stat-item stat-box-total-time",children:[e.jsx("h3",{children:"Общее время"}),e.jsx("div",{className:"value",children:h(t)})]}),e.jsxs("div",{className:"stat-item stat-box-question",children:[e.jsx("h3",{children:"Вопрос"}),e.jsxs("div",{className:"value",children:[u,"/",a]})]}),e.jsxs("div",{className:"stat-item stat-box-question-time",children:[e.jsx("h3",{children:"Время на вопрос"}),e.jsx("div",{className:"value",style:i?{color:i}:void 0,children:c})]})]})})}v.propTypes={totalSeconds:n.number.isRequired,questionSeconds:n.number.isRequired};const q=r.memo(v);function f({question:t,showAnswer:s,showExplanation:o,onToggleAnswer:l,onToggleExplanation:a,onNext:u}){const{currentQuestionIndex:i,questionSeconds:c}=j(),{questions:d}=p(),m=d.length,x=i+1,g=r.useMemo(()=>s||o||c<=0,[s,o,c]);return e.jsxs("div",{id:"questionContainer",children:[e.jsxs("div",{className:"question-block",children:[e.jsx("div",{className:"question-category",children:t.category}),e.jsxs("div",{className:"question-number",children:["Вопрос ",x," из ",m]}),e.jsx("div",{className:"question-text",children:t.question}),e.jsxs("div",{className:"answer-section",children:[e.jsx("button",{className:"toggle-button",onClick:l,children:"Показать ответ"}),e.jsx("button",{className:"toggle-button",onClick:a,children:"Показать объяснение"}),s&&e.jsx("div",{className:"hidden-content show",children:e.jsx("div",{className:"answer-text",children:t.answer})}),o&&e.jsx("div",{className:"hidden-content show",children:e.jsx("div",{className:"explanation-text",children:t.explanation})})]})]}),e.jsx("div",{className:"controls",children:e.jsx("button",{className:"btn btn-success",onClick:u,disabled:!g,children:"Далее"})})]})}f.propTypes={question:n.shape({category:n.string.isRequired,question:n.string.isRequired,answer:n.string.isRequired,explanation:n.string}).isRequired,showAnswer:n.bool.isRequired,showExplanation:n.bool.isRequired,onToggleAnswer:n.func.isRequired,onToggleExplanation:n.func.isRequired,onNext:n.func.isRequired};const w=r.memo(f);function P(){const{isPracticeStarted:t,currentQuestion:s,showAnswer:o,showExplanation:l,practiceStartTime:a,questionStartTime:u,toggleAnswer:i,toggleExplanation:c}=j(),{totalSeconds:d,questionSeconds:m}=N(t,a,u),{next:x}=b();return!t||!s?null:e.jsxs(e.Fragment,{children:[e.jsx(q,{totalSeconds:d,questionSeconds:m}),e.jsx(w,{question:s,showAnswer:o,showExplanation:l,onToggleAnswer:i,onToggleExplanation:c,onNext:x})]})}export{P as default};
